import { useState, useEffect } from 'react';
import { openPopupWidget } from 'react-calendly';
import config from 'react-reveal/globals';
import Fade from 'react-reveal/Fade';

config({ ssrFadeout: true });

import Link from 'next/link';

const Header = () => {

    const [theme, setTheme] = useState('light');
    const [menu, setMenu] = useState(false);

    useEffect(() => {
        if (typeof window != 'undefined') {
            window.addEventListener('scroll', () => {
                if (window.scrollY > 620) setTheme('dark');
                else setTheme('light');
            });
        };
    });

    const openCalendly = () => {
        openPopupWidget({
            url: 'https://calendly.com/or-equals/30-minute-discovery-call',
        })
    };

    const scrollTop = () => {
        scrollTo(0, 0);
        setTheme('light')
    };

    const scrollTopAndCloseMenu = () => {
        scrollTo(0, 0);
        setMenu(false);
    };

    const scrollToId = () => setTheme('dark');
    const toggleMenu = () => menu ? setMenu(false) : setMenu(true)
    const closeMenu = () => setMenu(false);

    return (
        <header className={`header_${theme}`}>
            <div className={`header-container_${theme}`}>
                <Link href="/">
                    <svg onClick={scrollTopAndCloseMenu} className='header-logo' width="188" height="39" viewBox="0 0 188 39" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fillRule="evenodd" clipRule="evenodd" d="M31.4562 0.00851814C31.2362 0.0268506 30.5246 0.613679 29.4618 1.6165C29.1662 1.89539 28.8434 2.20646 28.4965 2.54642C25.8466 5.14325 21.7875 9.426 17.6643 13.9326C17.6584 13.9392 17.6524 13.9457 17.6464 13.9522C13.6159 18.358 9.52603 22.9756 6.63293 26.4397C4.9145 28.5019 3.45318 30.4354 2.34317 32.0834C2.34088 32.0868 2.3386 32.0902 2.33633 32.0936C1.62026 33.1573 1.05086 34.1018 0.6535 34.8846C0.228209 35.7225 0 36.3753 0 36.7911C0 39.6487 0.928561 39.7205 3.37838 36.7911C3.48111 36.6683 3.58652 36.5402 3.69465 36.4068C4.18201 35.8054 4.72461 35.0965 5.32645 34.2787C6.08971 33.2342 7.63981 31.3226 9.63655 28.9483L9.63927 28.945C12.6375 25.3799 16.642 20.7723 20.5018 16.4903C24.9485 11.4877 28.8189 6.77335 30.7844 4.00768C31.1517 3.49078 31.4525 3.04196 31.6781 2.67204C31.8048 2.46438 31.9077 2.28158 31.9854 2.12557C32.0999 1.89567 32.1597 1.72393 32.1597 1.6165C32.1597 0.712012 31.8582 -0.0919808 31.4562 0.00851814ZM16.7701 34.9456C16.2615 36.1819 16.2764 37.1034 16.5823 38.0976C16.9582 39.3754 17.5026 39.4164 19.309 37.2957C19.3231 37.2791 19.3373 37.2624 19.3515 37.2456C19.5875 36.9672 19.8446 36.6526 20.1253 36.2999C20.5599 35.7537 21.051 35.1159 21.6073 34.3792C22.8376 32.7388 24.9569 30.1309 27.3784 27.2758C27.3805 27.2733 27.3826 27.2708 27.3847 27.2683C29.7089 24.5281 32.3109 21.5608 34.6721 19.0028C39.4961 13.7769 44.521 8.04843 45.928 6.23945C46.2239 5.85904 46.4976 5.46085 46.7434 5.06077C47.6665 3.55835 48.1972 2.02929 48.0385 1.315C47.9877 1.02704 47.6228 1.10453 46.9939 1.49934C46.9568 1.52261 46.9189 1.54699 46.88 1.57246C46.2988 1.95298 45.5152 2.57744 44.5633 3.41297C44.2323 3.70343 43.8811 4.01939 43.5109 4.35947C40.5661 7.06501 36.4249 11.2974 31.8106 16.3614C29.4397 18.9633 26.9439 21.7847 24.4212 24.7313C21.655 27.9461 19.7508 30.2572 18.4915 32.0264C18.489 32.0299 18.4866 32.0333 18.4841 32.0368C17.6502 33.2094 17.1 34.1437 16.7701 34.9456ZM41.0996 23.3642C40.9018 23.479 40.7341 23.5997 40.6016 23.7263C38.8931 25.4348 38.8931 25.5352 40.8026 25.8367C41.3229 25.9111 41.9686 25.9348 42.6928 25.9171C42.725 25.9163 42.7573 25.9154 42.7898 25.9145C42.9797 25.9089 43.1748 25.9006 43.3742 25.8897C45.5777 25.7688 48.3107 25.329 50.4651 24.7858C52.4054 24.2965 53.8763 23.7234 54.0684 23.2238C54.0832 23.1795 54.0924 23.1363 54.0962 23.0943C54.1615 22.3756 52.6542 21.9912 50.6124 21.8945C50.3461 21.8819 50.0708 21.8742 49.7887 21.8713C49.7841 21.8712 49.7795 21.8712 49.7749 21.8711C47.3623 21.8475 44.4568 22.1735 42.4949 22.7847C41.9947 22.9405 41.5558 23.1149 41.2021 23.3068C41.1882 23.3143 41.1744 23.3219 41.1608 23.3294C41.1401 23.341 41.1197 23.3526 41.0996 23.3642ZM54.8194 18.8707C55.0182 18.8393 55.206 18.808 55.3834 18.7764C57.969 18.3168 58.3203 17.8258 57.7869 16.8923C57.581 16.5834 56.1089 16.3566 54.1715 16.2278C52.6748 16.1283 50.9005 16.0873 49.2176 16.1123C49.2111 16.1124 49.2046 16.1125 49.198 16.1126C47.6674 16.1358 46.2137 16.2136 45.1151 16.3515C44.4127 16.4397 43.8554 16.5525 43.516 16.6913C42.8309 16.8871 42.2411 17.7501 42.2108 18.6306C42.21 18.6541 42.2096 18.6777 42.2096 18.7013C42.2096 19.5082 42.6312 19.8551 44.4215 19.8604C44.5447 19.8607 44.6744 19.8595 44.8109 19.8566C45.136 19.8499 45.4996 19.8342 45.9059 19.81C46.8638 19.7531 48.0589 19.6492 49.546 19.5053C51.8278 19.2713 53.5476 19.0713 54.8194 18.8707Z" fill="#FFCC00" />
                        <path className={`header-logo_${theme}`} d="M77.0356 7.39398C75.1642 7.95212 75 8.87141 75 17.8673C75 27.0602 75.1313 27.7825 77.2326 28.3735C77.9549 28.6033 79.6949 28.7346 81.2052 28.6689C83.7004 28.5376 83.9959 28.4391 84.7182 27.6183L85.5062 26.699V17.8673C85.5062 9.0684 85.5062 9.03557 84.7182 8.14911C83.9959 7.29549 83.7661 7.22982 81.041 7.13133C79.4323 7.09849 77.6265 7.19699 77.0356 7.39398ZM81.829 10.5787C82.1245 10.8085 82.223 12.5157 82.1573 18.0643L82.0588 25.2544L80.6471 25.3529C78.2832 25.5171 78.2832 25.5171 78.2832 18.13C78.2832 14.2558 78.4145 11.3338 78.6115 10.9398C78.9726 10.2832 80.9754 10.0534 81.829 10.5787Z" fill="#111111" />
                        <path className={`header-logo_${theme}`} d="M88.6252 7.42681C88.5267 7.65663 88.4938 12.5157 88.5267 18.1956L88.6252 28.5376L89.7415 28.6361C90.3653 28.7018 91.186 28.6689 91.6129 28.5705C92.368 28.3735 92.4008 28.275 92.4008 24.9261V21.4788H93.3201C94.1737 21.4788 94.2394 21.6101 94.9945 24.4993C96.078 28.6689 96.078 28.7018 97.8181 28.7018C99.6238 28.7018 99.6566 28.472 98.4747 24.3023L97.6211 21.446L98.4419 20.461C99.5253 19.1806 99.7223 18.0315 99.591 13.1395C99.4596 9.13406 99.4268 9.00274 98.5404 8.11628C97.6539 7.22982 97.5554 7.19699 93.2216 7.0985C89.7086 7 88.7565 7.06566 88.6252 7.42681ZM95.8482 17.7031L94.1409 17.8016L92.4008 17.9001V10.6115L94.1409 10.71L95.8482 10.8085V17.7031Z" fill="#111111" />
                        <path className={`header-logo_${theme}`} d="M109.473 28.7018H119.979V25.4514L112.921 25.2544L112.724 19.5089H118.371L118.272 17.7688L118.174 16.0616L112.757 15.8646V10.6772L119.815 10.4802L119.914 8.74008L120.012 7.03283H109.473V28.7018Z" fill="#111111" />
                        <path className={`header-logo_${theme}`} d="M125.036 7.26265C124.642 7.32832 123.985 7.75513 123.558 8.21477C122.77 9.03557 122.77 9.16689 122.672 17.0465C122.54 26.3707 122.737 27.5198 124.412 28.2421C125.036 28.5048 126.119 28.7018 126.808 28.7018C127.925 28.7018 128.122 28.8331 128.614 29.8509C129.14 30.9343 129.238 31 130.814 31C131.7 31 132.456 30.9343 132.456 30.8687C132.456 30.803 132.226 30.212 131.93 29.5226C131.471 28.3735 131.471 28.275 132.094 27.8482C133.211 27.0602 133.44 25.2544 133.44 17.8016C133.44 9.56087 133.178 8.28044 131.274 7.49247C130.256 7.06566 126.677 6.93433 125.036 7.26265ZM129.632 11.1696C129.731 11.4651 129.829 14.617 129.829 18.1956C129.829 24.4993 129.796 24.762 129.14 25.1231C128.746 25.3201 127.958 25.3858 127.334 25.2544L126.218 25.0575V18.0643C126.218 14.223 126.316 10.9726 126.447 10.8741C126.546 10.7428 127.268 10.6443 128.056 10.6443C129.008 10.6443 129.501 10.8085 129.632 11.1696Z" fill="#111111" />
                        <path className={`header-logo_${theme}`} d="M136.625 7.22982C136.231 7.6238 136.363 25.5171 136.757 26.699C136.953 27.29 137.544 27.9466 138.07 28.2093C139.285 28.8331 143.586 28.8659 145.096 28.2421C146.803 27.5198 146.934 26.5677 146.836 16.2257L146.737 7.19699H143.454L143.356 16.1272L143.29 25.0903L142.469 25.2873C142.01 25.3858 141.287 25.3858 140.828 25.2873L140.007 25.0903L139.941 16.1272L139.843 7.19699L138.365 7.09849C137.544 7.03283 136.756 7.09849 136.625 7.22982Z" fill="#111111" />
                        <path className={`header-logo_${theme}`} d="M153.008 9.39671C152.713 10.71 152.056 13.8618 151.531 16.3899C150.973 18.9179 150.185 22.6607 149.758 24.6963C148.839 28.8331 148.839 28.8331 151.038 28.6361C152.352 28.5376 152.516 28.275 152.975 25.6484L153.172 24.4337H158.327L158.557 25.9767C158.918 28.472 159.181 28.7674 160.953 28.6361C162.103 28.5704 162.464 28.4063 162.431 28.0451C162.3 27.1587 159.739 15.2079 158.819 11.0383L157.933 7.03283H153.501L153.008 9.39671ZM156.62 15.7989C157.047 17.736 157.408 19.8372 157.408 20.3953C157.408 21.4788 157.408 21.4788 155.766 21.4788C154.683 21.4788 154.124 21.3475 154.124 21.052C154.092 20.1984 155.536 11.9576 155.7 12.0889C155.766 12.1874 156.193 13.8618 156.62 15.7989Z" fill="#111111" />
                        <path className={`header-logo_${theme}`} d="M165.616 28.7346L175.958 28.5376V25.5828L169.227 25.3858L169.161 16.2914L169.063 7.19699L167.356 7.0985L165.616 7V28.7346Z" fill="#111111" />
                        <path className={`header-logo_${theme}`} d="M179.536 7.36115C177.862 7.88646 177.435 9.23256 177.435 13.8618C177.435 16.6525 177.566 17.9001 177.829 18.0971C178.059 18.2285 179.569 18.7866 181.211 19.3447L184.166 20.3297L184.264 22.6936C184.363 24.9918 184.33 25.0903 183.509 25.2873C183.049 25.3858 182.327 25.3858 181.867 25.2873C181.145 25.0903 181.047 24.9261 181.047 23.4487V21.8071H177.435V23.777C177.435 27.7168 178.486 28.7018 182.688 28.7018C187.317 28.7018 187.941 27.881 187.941 22.0369C187.941 19.1149 187.843 18.1956 187.449 17.8673C187.186 17.6703 185.676 17.0465 184.1 16.554L181.211 15.6347V10.8085L182.787 10.71L184.33 10.6115V13.9275H187.941V11.9904C187.941 9.65937 187.514 8.31327 186.529 7.68946C185.643 7.13133 180.981 6.93433 179.536 7.36115Z" fill="#111111" />
                    </svg>

                </Link>

                <nav className='nav'>
                    <Link href="/">
                        <a onClick={scrollTop} className={`nav-link_${theme}`}>Home</a>
                    </Link>
                    <Link href="#services">
                        <a className={`nav-link_${theme}`}>Services</a>
                    </Link>
                    <Link href="#work">
                        <a onClick={scrollToId} className={`nav-link_${theme}`}>Work</a>
                    </Link>
                    <Link href="#about">
                        <a onClick={scrollToId} className={`nav-link_${theme}`}>About</a>
                    </Link>
                    <Link href="#contact">
                        <a onClick={scrollToId} className={`nav-link_${theme}`}>Contact</a>
                    </Link>
                </nav>

                <button className='nav-toggle' onClick={toggleMenu}>
                    {
                        !menu
                            ? <svg width="36" height="23" viewBox="0 0 36 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect width="36" height="3" rx="1.5" fill="#888888" />
                                <rect y="10" width="36" height="3" rx="1.5" fill="#888888" />
                                <rect y="20" width="36" height="3" rx="1.5" fill="#888888" />
                            </svg>
                            : <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="2.33203" width="36" height="3" rx="1.5" transform="rotate(45 2.33203 0)" fill="#888888" />
                                <rect y="25.4561" width="36" height="3" rx="1.5" transform="rotate(-45 0 25.4561)" fill="#888888" />
                            </svg>
                    }
                </button>

                <nav className={menu ? 'responsive-menu' : 'none'}>
                    <div className='responsive-nav'>
                        <Link href='/'>
                            <a onClick={scrollTopAndCloseMenu} className='responsive-nav__link'>
                                <Fade bottom distance='20px' duration={400}>
                                    Home
                                </Fade>
                            </a>
                        </Link>
                        <Link href='#services'>
                            <a onClick={closeMenu} className='responsive-nav__link'>
                                <Fade bottom distance='20px' duration={500}>
                                    Services
                                </Fade>
                            </a>
                        </Link>
                        <Link href='#work'>
                            <a onClick={closeMenu} className='responsive-nav__link'>
                                <Fade bottom distance='20px' duration={600}>
                                    Work
                                </Fade>
                            </a>
                        </Link>
                        <Link href='#about'>
                            <a onClick={closeMenu} className='responsive-nav__link'>
                                <Fade bottom distance='20px' duration={700}>
                                    About
                                </Fade>
                            </a>
                        </Link>
                        <Link href='#contact'>
                            <a onClick={closeMenu} className='responsive-nav__link'>
                                <Fade bottom distance='20px' duration={800}>
                                    Contact
                                </Fade>
                            </a>
                        </Link>
                    </div>

                    <button
                        className='button_dark'
                        onClick={openCalendly}
                    >
                        Schedule an appointment
                    </button>
                </nav>
            </div>
        </header>
    );
};

export default Header;